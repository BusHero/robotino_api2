SET(
  NAME
  rec_robotino_server
)

FILE( GLOB SRCS *.cpp )
FILE( GLOB MAIN_HEADER *.h )

MY_WRAP_CPP(
	MOC_SRCS
	"${rec_robotino_server}"
	${MAIN_HEADER}
)

INCLUDE( v1/CMakeLists.txt )

ADD_LIBRARY(
	${NAME}
	STATIC
	${MAIN_HEADER}
	${SRCS}
	${HEADER}
	${MOC_SRCS}
)

IF(WIN32 AND NOT MINGW)
	SET_TARGET_PROPERTIES( ${NAME} PROPERTIES COMPILE_FLAGS "/MP" )
ENDIF(WIN32 AND NOT MINGW)

TARGET_LINK_LIBRARIES(
	${NAME}
	${QT_QTCORE_LIBRARY}
	${QT_QTNETWORK_LIBRARY}
	${QT_HELP_LIBRARIES}
)

IF( DO_COMMON_INSTALL )
	SET( REC_ROBOTINO_SERVER_INCLUDE_INSTALL_DIR include/rec/robotino/server )
	INSTALL(
	  TARGETS ${NAME}
	  LIBRARY DESTINATION ${LIB_INSTALL_DIR}
	  ARCHIVE DESTINATION ${LIB_INSTALL_DIR}
	  RUNTIME DESTINATION ${BIN_INSTALL_DIR}
	)

	INSTALL(
	  FILES
	  ${MAIN_HEADER}
	  DESTINATION ${REC_ROBOTINO_SERVER_INCLUDE_INSTALL_DIR}
	)
ENDIF( DO_COMMON_INSTALL )

SOURCE_GROUP( Moc REGULAR_EXPRESSION "(moc_|qrc_)" )
SOURCE_GROUP( "Source Files" FILES ${MAIN_SRCS} ${MAIN_HEADER} )