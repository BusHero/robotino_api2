SET(
	NAME
	rec_robotino_daemons
)

#only neccessary in openrobotino1
SET_PROPERTY( DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR} APPEND PROPERTY INCLUDE_DIRECTORIES ${QT_INCLUDE_DIR} ${QT_QTCORE_INCLUDE_DIR} )
ADD_DEFINITIONS(${QT_DEFINITIONS})

INCLUDE_DIRECTORIES(
	${CMAKE_CURRENT_BINARY_DIR}
)

FILE( GLOB SRCS *.cpp )
FILE( GLOB HEADER *.h )

MY_WRAP_CPP(
	MOC_SRCS
	"rec_robotino_daemons"
	${HEADER}
)
	
ADD_LIBRARY(
	${NAME}
	STATIC
	${SRCS}
	${HEADER}
	${MOC_SRCS}
)

SOURCE_GROUP( Moc REGULAR_EXPRESSION "(moc_|qrc_)" )
SOURCE_GROUP( Sources FILES ${SRCS} ${HEADER} )

IF(WIN32)
SET_TARGET_PROPERTIES(
	${NAME}
	PROPERTIES
	COMPILE_FLAGS "/wd4251 /MP"
)
ENDIF( WIN32 )

TARGET_LINK_LIBRARIES(
	${NAME}
	${QT_QTCORE_LIBRARY}
	${QT_QTNETWORK_LIBRARY}
	${QT_QTXML_LIBRARY}
	${QT_HELP_LIBRARIES}
)

IF( DO_COMMON_INSTALL )
	SET( REC_ROBOTINO_DAEMONS_INCLUDE_INSTALL_DIR include/rec/robotino/daemons )

	INSTALL(
		TARGETS ${NAME}
		ARCHIVE DESTINATION lib
		LIBRARY DESTINATION lib
		RUNTIME DESTINATION bin
	)

	INSTALL(
		FILES
		${HEADER}
		DESTINATION ${REC_ROBOTINO_DAEMONS_INCLUDE_INSTALL_DIR}
	)
ENDIF( DO_COMMON_INSTALL )
