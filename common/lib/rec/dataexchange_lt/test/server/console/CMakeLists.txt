SET(
	NAME
	rec_dataexchange_server_console_test
)

CONFIGURE_FILE( ${CMAKE_CURRENT_SOURCE_DIR}/map.xml ${CMAKE_CURRENT_BINARY_DIR}/map.xml COPYONLY )

FILE( GLOB SRCS *.cpp )
FILE( GLOB HEADER *.h )

ADD_EXECUTABLE(
	${NAME}
	${SRCS}
	${HEADER}
)

TARGET_LINK_LIBRARIES(
	${NAME}
	${QT_QTCORE_LIBRARY}
	${QT_QTXML_LIBRARY}
	rec_dataexchange
)

SOURCE_GROUP( "Source Files" FILES ${SRCS} ${HEADER} )

IF( REC_DATAEXCHANGE_INSTALL_HEADER_ENABLED )
	INSTALL(
		FILES
		${SRCS}
		${HEADER}
		DESTINATION api/examples/rec/dataexchange/server
	)
	IF( WIN32 )
		INSTALL(
			FILES
			${CMAKE_CURRENT_SOURCE_DIR}/server.vcproj
			${CMAKE_CURRENT_SOURCE_DIR}/server.settings
			"${CMAKE_CURRENT_SOURCE_DIR}/RUN THIS FIRST THEN START VS.cmd"
			DESTINATION api/examples/rec/dataexchange/server
		)
	ELSE( WIN32 )
		INSTALL(
			FILES
			${CMAKE_CURRENT_SOURCE_DIR}/Makefile
			${CMAKE_CURRENT_SOURCE_DIR}/map.xml
			DESTINATION api/examples/rec/dataexchange/server
		)
	ENDIF( WIN32 )
ENDIF( REC_DATAEXCHANGE_INSTALL_HEADER_ENABLED )
