SET(
  NAME
  rec_robotino_com_c
)

FILE( GLOB HEADER *.h )
FILE( GLOB PRIVATE_HEADER *.hh )
FILE( GLOB SRCS *.cpp )

ADD_LIBRARY(
	${NAME}
	SHARED
	${SRCS}
	${HEADER}
	${PRIVATE_HEADER}
)

IF(WIN32 AND NOT MINGW)
	SET_TARGET_PROPERTIES( ${NAME} PROPERTIES COMPILE_FLAGS "/MP" )
ENDIF(WIN32 AND NOT MINGW)

TARGET_LINK_LIBRARIES(
  ${NAME}
  ${QT_QTCORE_LIBRARY}
  ${QT_QTNETWORK_LIBRARY}
  rec_iocontrol_robotstate
  rec_core_lt
  rec_robotino_com
)

INSTALL(
  TARGETS ${NAME}
  LIBRARY DESTINATION ${LIB_INSTALL_DIR}
  ARCHIVE DESTINATION ${LIB_INSTALL_DIR}
  RUNTIME DESTINATION ${BIN_INSTALL_DIR}
)

INSTALL(
  FILES
  ${HEADER}
  DESTINATION ${INCLUDE_INSTALL_DIR}/rec/robotino/com/c
)

IF( NOT NODOXYGEN )
FIND_PACKAGE( Doxygen )

IF( DOXYGEN_FOUND )
	SET( OUTPUT_DIRECTORY "${CMAKE_CURRENT_BINARY_DIR}/doxygen" )
	GENERATE_DOCUMENTATION( ${NAME} "${HEADER}" "${OUTPUT_DIRECTORY}" "rec_robotino_com_c" )
  
  #MESSAGE( "rec_robotino_com_c ${DOXYGEN_OUTPUT_DIRECTORY}" )
  
  INSTALL(
		DIRECTORY
		"${DOXYGEN_OUTPUT_DIRECTORY}/"
		DESTINATION ${DOC_INSTALL_DIR}/rec_robotino_com_c
  )

ENDIF( DOXYGEN_FOUND )
ENDIF( NOT NODOXYGEN )

SOURCE_GROUP( "Source Files" FILES ${SRCS} ${HEADER} ${PRIVATE_HEADER} )