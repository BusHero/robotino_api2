SET(
  NAME
  rec_robotino3_grippercom
)

#only neccessary in openrobotino1
SET_PROPERTY( DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR} APPEND PROPERTY INCLUDE_DIRECTORIES ${QT_INCLUDE_DIR} ${QT_QTCORE_INCLUDE_DIR} )
ADD_DEFINITIONS(${QT_DEFINITIONS})

FILE( GLOB SRCS *.cpp )
FILE( GLOB HEADER *.h )
FILE( GLOB TAG_SRCS tag/*.cpp )
FILE( GLOB TAG_HEADER tag/*.h )

MY_WRAP_CPP(
	MOC_SRCS
	"${rec_grippercom}"
	${HEADER}
)

ADD_LIBRARY(
  ${NAME}
  STATIC
  ${SRCS}
  ${HEADER}
  ${MOC_SRCS}
  ${TAG_SRCS}
  ${TAG_HEADER}
)

IF(WIN32 AND NOT MINGW)
	SET_TARGET_PROPERTIES( ${NAME} PROPERTIES COMPILE_FLAGS "/MP" )
ENDIF(WIN32 AND NOT MINGW)

TARGET_LINK_LIBRARIES(
	${NAME}
	${QT_QTCORE_LIBRARY}
	${QT_HELP_LIBRARIES}
	rec_serialport
)

IF( DO_COMMON_INSTALL )
	INSTALL(
	  TARGETS ${NAME}
	  LIBRARY DESTINATION lib
	  ARCHIVE DESTINATION lib
	  RUNTIME DESTINATION lib
	)

	INSTALL(
	  FILES
	  ${HEADER}
	  DESTINATION include/rec/robotino3/grippercom
	)
ENDIF( DO_COMMON_INSTALL )

SOURCE_GROUP( "Source Files" FILES ${SRCS} ${HEADER} )
SOURCE_GROUP( "Tags" FILES ${TAG_SRCS} ${TAG_HEADER} )
SOURCE_GROUP( Moc REGULAR_EXPRESSION "(moc_|qrc_)" )