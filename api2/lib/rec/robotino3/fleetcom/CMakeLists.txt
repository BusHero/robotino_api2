SET(
  NAME
  rec_robotino3_fleetcom
)

#only neccessary in openrobotino1
SET_PROPERTY( DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR} APPEND PROPERTY INCLUDE_DIRECTORIES ${QT_INCLUDE_DIR} ${QT_QTCORE_INCLUDE_DIR} )
ADD_DEFINITIONS(${QT_DEFINITIONS})

FILE( GLOB SRCS *.cpp )
FILE( GLOB HEADER *.h )

MY_WRAP_CPP(
	MOC_SRCS
	"${rec_robotino3_fleetcom}"
	${HEADER}
)

ADD_LIBRARY(
  ${NAME}
  STATIC
  ${SRCS}
  ${HEADER}
  ${MOC_SRCS}
)

IF(WIN32 AND NOT MINGW)
	SET_TARGET_PROPERTIES( ${NAME} PROPERTIES COMPILE_FLAGS "/MP" )
ENDIF(WIN32 AND NOT MINGW)

TARGET_LINK_LIBRARIES(
	${NAME}
	${QT_QTCORE_LIBRARY}
	${QT_HELP_LIBRARIES}
)

IF (APPLE)
	set_target_properties (${NAME} PROPERTIES XCODE_ATTRIBUTE_SYMROOT "${ROBOTINO_API2_BINARY_DIR}")
	set_target_properties (${NAME} PROPERTIES XCODE_ATTRIBUTE_CONFIGURATION_BUILD_DIR "\$(BUILD_DIR)/\$(CONFIGURATION)\$(EFFECTIVE_PLATFORM_NAME)")
ENDIF (APPLE)

IF( DO_COMMON_INSTALL )
	INSTALL(
	  TARGETS ${NAME}
	  LIBRARY DESTINATION lib
	  ARCHIVE DESTINATION lib
	  RUNTIME DESTINATION lib
	)

	INSTALL(
	  FILES
	  ${HEADER}
	  DESTINATION include/rec/robotino3/fleetcom
	)
ENDIF( DO_COMMON_INSTALL )

SOURCE_GROUP( "Source Files" FILES ${SRCS} ${HEADER} )
SOURCE_GROUP( Moc REGULAR_EXPRESSION "(moc_|qrc_)" )