SET(
  NAME
  configtest
)

INCLUDE_DIRECTORIES(
  ${CMAKE_CURRENT_BINARY_DIR}
  ${CMAKE_CURRENT_SOURCE_DIR}
  ${CMAKE_CURRENT_SOURCE_DIR}/../fcgid
  ${SHARED_LIB_DIR}/rec/robotino/
)

FILE( GLOB SRCS *.cpp )
FILE( GLOB HEADER *.h )

SET( SRCS
	${SRCS}
	../fcgid/ConfigReader.cpp
	../fcgid/ConfigEditor.cpp
)

SET( HEADER
	${HEADER}
	../fcgid/ConfigReader.h
	../fcgid/ConfigEditor.h
)

MY_WRAP_CPP(
	MOC_SRCS
	${NAME}
	${HEADER}
)

#QT4_ADD_RESOURCES(
#	RCC_SRCS
#	web.qrc
#	images.qrc
#)

ADD_EXECUTABLE(
  ${NAME}
  ${SRCS}
  ${HEADER}
  ${MOC_SRCS}
  ${RCC_SRCS}
)

IF(WIN32)
SET_TARGET_PROPERTIES(
  ${NAME}
  PROPERTIES
  COMPILE_FLAGS "/wd4251 /MP"
)
ENDIF( WIN32 )

TARGET_LINK_LIBRARIES(
	${NAME}
	${QT_QTCORE_LIBRARY}
	${QT_QTGUI_LIBRARY}
	${QT_QTNETWORK_LIBRARY}
	${QT_QTXML_LIBRARY}
	${QT_HELP_LIBRARIES}
	${REC_RPC_LIBRARY}
	${REC_ROBOTINO_DAEMONS_LIBRARY}
	${REC_ROBOTINO_RPC_LIBRARY}
	${REC_ROBOTINO_NAVIGATION_LIBRARY}
	${FCGI_LIB}
	${JANSSON_LIB}
	${REC_CV_LT_LIBRARY}
)

#INSTALL(
#  TARGETS 
#  ${NAME}
#  PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
#  DESTINATION "${INSTALL_DIR}/var/www/fcgi-bin"
#)

SOURCE_GROUP( "Source Files" FILES ${SRCS} ${HEADER} )
SOURCE_GROUP( Moc REGULAR_EXPRESSION "(moc_|qrc_)" )
