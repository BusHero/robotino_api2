IF( WIN32 )
	SET( ARCH win )
	SET( LIB_VERSION 2_7 )
ELSE( WIN32 )
	SET( ARCH linux )
	SET( LIB_VERSION 2_9 )
ENDIF( WIN32 )

IF( CMAKE_SIZEOF_VOID_P EQUAL 8 )
  SET( ARCH ${ARCH}64 )
ELSE( CMAKE_SIZEOF_VOID_P EQUAL 8 )
  SET( ARCH ${ARCH}32 )
ENDIF( CMAKE_SIZEOF_VOID_P EQUAL 8 )

FIND_PATH(
	JANSSON_INCLUDE_DIR 
	NAMES jansson.h
	PATHS ${EXTERNAL_DIR}/libjansson/${LIB_VERSION}/include
	NO_DEFAULT_PATH
)

IF( WIN32 )
	IF( MSVC10 )
			SET( COMPILER_NAME vc100 )
	ELSEIF( MSVC12 )
			SET( COMPILER_NAME vc120 )
	ELSE()
			MESSAGE( FATAL_ERROR "jansson libraries available for this compiler version" )
	ENDIF()

	FIND_LIBRARY (
 		JANSSON_REL_LIB
		NAMES jansson
		PATHS ${EXTERNAL_DIR}/libjansson/${LIB_VERSION}/lib/${ARCH}/${COMPILER_NAME}
		NO_DEFAULT_PATH
	)

	FIND_LIBRARY (
 		JANSSON_DEBUG_LIB
		NAMES jansson_d
		PATHS ${EXTERNAL_DIR}/libjansson/${LIB_VERSION}/lib/${ARCH}/${COMPILER_NAME}
		NO_DEFAULT_PATH
	)

	SET( JANSSON_LIB optimized ${JANSSON_REL_LIB} debug ${JANSSON_DEBUG_LIB} )
ELSE()
	FIND_LIBRARY (
 		JANSSON_LIB
		NAMES jansson
		PATHS ${EXTERNAL_DIR}/libjansson/${LIB_VERSION}/lib/${ARCH}
		NO_DEFAULT_PATH
	)
ENDIF()

SET( JANSSON_FOUND 0 )

IF( JANSSON_INCLUDE_DIR AND JANSSON_LIB )
  SET( JANSSON_FOUND 1 )
  INCLUDE_DIRECTORIES( ${JANSSON_INCLUDE_DIR} )
ENDIF( JANSSON_INCLUDE_DIR AND JANSSON_LIB )


